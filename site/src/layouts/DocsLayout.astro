---
interface NavItem {
  title: string;
  href: string;
}

interface Props {
  title: string;
  primaryNav: NavItem[];
  apiNav: NavItem[];
  currentHref: string;
}

const { title, primaryNav, apiNav, currentHref } = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} | UltraPlot Docs</title>
    <style>
      :root {
        --bg: #f5f6f7;
        --panel: #eceef1;
        --panel-strong: #e2e5ea;
        --text: #16181d;
        --muted: #5a6270;
        --line: #cfd5de;
        --accent: #111827;
        --accent-soft: #dbe3ef;
        --code-bg: #f0f3f7;
      }
      body {
        margin: 0;
        color: var(--text);
        background: var(--bg);
        font-family: "Avenir Next", "Source Sans 3", "Segoe UI", sans-serif;
      }
      .wrap {
        display: grid;
        grid-template-columns: 280px minmax(0, 1fr);
        min-height: 100vh;
      }
      .sidebar {
        background: var(--panel);
        border-right: 1px solid var(--line);
        padding: 1.1rem 0.9rem;
      }
      .brand {
        font-weight: 800;
        letter-spacing: 0.02em;
        margin-bottom: 1.2rem;
        padding: 0.45rem 0.55rem;
        background: var(--panel-strong);
        border: 1px solid var(--line);
        border-radius: 8px;
      }
      .section {
        margin-bottom: 1rem;
      }
      .section h3 {
        margin: 0 0 0.45rem;
        padding: 0 0.4rem;
        font-size: 0.75rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        color: #4b5563;
      }
      .navlist {
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .navlist a {
        display: block;
        color: var(--muted);
        text-decoration: none;
        border-radius: 6px;
        padding: 0.38rem 0.5rem;
        margin-bottom: 0.12rem;
        line-height: 1.25;
      }
      .navlist a:hover {
        background: #e6eaf0;
        color: #293142;
      }
      .navlist a.active {
        color: var(--accent);
        background: var(--accent-soft);
        font-weight: 700;
      }
      .content {
        padding: 2rem 2.2rem 2.6rem;
        max-width: 920px;
      }
      .content :global(h1),
      .content :global(h2),
      .content :global(h3) {
        letter-spacing: 0.01em;
      }
      .content :global(h1) {
        margin-top: 0.15rem;
      }
      .content :global(p),
      .content :global(li) {
        line-height: 1.65;
      }
      .content :global(pre),
      .content :global(code) {
        background: var(--code-bg);
      }
      .content :global(pre) {
        border: 1px solid var(--line);
        border-radius: 8px;
        padding: 0.85rem;
        overflow-x: auto;
      }
      .content :global(table) {
        border-collapse: collapse;
      }
      .content :global(th),
      .content :global(td) {
        border: 1px solid var(--line);
        padding: 0.35rem 0.45rem;
      }
      .content :global(code) {
        font-family: "JetBrains Mono", "SFMono-Regular", ui-monospace, monospace;
      }
      @media (max-width: 940px) {
        .wrap {
          grid-template-columns: 1fr;
        }
        .sidebar {
          border-right: none;
          border-bottom: 1px solid var(--line);
        }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <aside class="sidebar">
        <div class="brand">UltraPlot Documentation</div>
        <section class="section">
          <h3>Overview</h3>
          <ul class="navlist">
            {primaryNav.map((item) => (
              <li>
                <a class={item.href === currentHref ? "active" : ""} href={item.href}
                  >{item.title}</a
                >
              </li>
            ))}
          </ul>
        </section>
        {apiNav.length > 0 && (
          <section class="section">
            <h3>API Modules</h3>
            <ul class="navlist">
              {apiNav.map((item) => (
                <li>
                  <a class={item.href === currentHref ? "active" : ""} href={item.href}
                    >{item.title}</a
                  >
                </li>
              ))}
            </ul>
          </section>
        )}
      </aside>
      <main class="content">
        <slot />
      </main>
    </div>
  </body>
</html>
